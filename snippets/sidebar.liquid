{% if section.blocks.size > 0 %}
  <div id="collection-filter" class="sidebar four columns toggle-all--{{ section.settings.toggle }}">
    {% for block in section.blocks %}
      <div class="filter-toolbar" {{ block.shopify_attributes }}>
        {% if block.type == 'menu' %}
          {% assign sidebar_menu = linklists[block.settings.custom_menu_linklist] %}
          {% if sidebar_menu != blank %}
            <h4 class="toggle" aria-haspopup="true" aria-expanded="false"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>{{ sidebar_menu.title }}</h4>
            <ul class="blog_list toggle_list">
              {% for link in sidebar_menu.links %}
                {% if link.active %}
                  {% assign active_link = true %}
                {% else %}
                  {% assign active_link = false %}
                  {% for sub_link in linklists[link.handle].links %}
                    {% if sub_link.active %}
                      {% assign active_link = true %}
                    {% else %}
                      {% for sub_sub_link in linklists[sub_link.handle].links %}
                        {% if sub_sub_link.active %}
                          {% assign active_link = true %}
                        {% endif %}
                      {% endfor %}
                    {% endif %}
                  {% endfor %}
                {% endif %}

                <li>
                  <a {% if link.active %}class="active"{% endif %} href="{{ link.url }}">{{ link.title }}</a>

                  {% if linklists[link.handle].links != blank %}
                    <span class="menu-toggle icon-arrow-down {% if active_link %}active{% endif %}" aria-haspopup="true" aria-expanded="{% if active_link %}true{% else %}false{% endif %}"> </span>

                    <ul class="{% if active_link %}active{% endif %}">
                      {% for sub_link in linklists[link.handle].links %}
                        {% if sub_link.active %}
                          {% assign active_link = true %}
                        {% else %}
                          {% assign active_link = false %}
                          {% for sub_sub_link in linklists[sub_link.handle].links %}
                            {% if sub_sub_link.active %}
                              {% assign active_link = true %}
                            {% endif %}
                          {% endfor %}
                        {% endif %}

                        <li class="sub-menu {% if active_link %}active{% endif %}">
                          <a {% if sub_link.active %}class="active"{% endif %} href="{{ sub_link.url }}">{{ sub_link.title }}</a>

                          {% if linklists[sub_link.handle].links != blank %}
                            <span class="menu-toggle icon-arrow-down {% if active_link %}active{% endif %}" aria-haspopup="true" aria-expanded="{% if active_link %}true{% else %}false{% endif %}"> </span>

                            <ul class="{% if active_link %}active{% endif %}">
                              {% for sub_sub_link in linklists[sub_link.handle].links %}
                                <li class="sub-menu">
                                  <a {% if sub_sub_link.active %}class="active"{% endif %} href="{{ sub_sub_link.url }}">{{ sub_sub_link.title }}</a>
                                </li>
                              {% endfor %}
                            </ul>
                          {% endif %}
                        </li>
                      {% endfor %}
                    </ul>
                  {% endif %}
                </li>
              {% endfor %}
            </ul>
          {% else %}
            <h4 class="toggle" aria-haspopup="true" aria-expanded="false"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>Menu title</h4>
            <ul class="blog_list toggle_list">
              <li><p>{{ 'homepage.onboarding.no_content' | t }}</p></li>
            </ul>
          {% endif %}

        {% elsif block.type == 'page' %}
          {% if block.settings.content_page != blank %}
            <h4 class="toggle" aria-haspopup="true" aria-expanded="false"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>{{ pages[block.settings.content_page].title }}</h4>
            <ul class="blog_list toggle_list content_block">
              <li>{{ pages[block.settings.content_page].content }}</li>
            </ul>
          {% else %}
            <h4 class="toggle"><span>+</span>Page title</h4>
            <ul class="blog_list toggle_list">
              <li><p>{{ 'homepage.onboarding.no_content' | t }}</p></li>
            </ul>
          {% endif %}

        {% elsif block.type == 'filter_by_tag' %}
          {% assign tag_count = collection.all_tags | size %}
            <h4 class="toggle" aria-haspopup="true" aria-expanded="false"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>{{ 'collections.sidebar.tags' | t }}</h4>
            {% if tag_count > 0 %}
              <ul class="blog_list toggle_list">
                <li>
                  <a {% unless current_tags %}class="active--default"{% endunless %} href="{% if collection.handle == "all" %}/collections/all{% else %}{{ collection.url }}{% endif %}">All {{ collection.title }}</a>
                </li>
                {% for tag in collection.all_tags %}
                  {% unless tag contains 'meta-' %}
                    <li>
                      <a {% if current_tags contains tag %}class="active"{% endif %} href="/collections/{% if collection.handle != blank %}{{ collection.handle }}{% else %}all{% endif %}/{{ tag | handleize }}">{{ tag }}</a>
                    </li>
                  {% endunless %}
                {% endfor %}
              </ul>
            {% else %}
              <p>No tags available.</p>
            {% endif %}

        {% elsif block.type == 'filter_by_type' %}
          <h4 class="toggle" aria-haspopup="true" aria-expanded="false"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>{{ 'collections.sidebar.product_types' | t }}</h4>
          <ul class="blog_list toggle_list">
            {% for product_type in shop.types %}
              <li {% if product_type == collection.title %}class="active"{% endif %}>{{ product_type | link_to_type }}</li>
            {% endfor %}
          </ul>

        {% elsif block.type == 'filter_by_collection' %}
          <h4 class="toggle" aria-haspopup="true" aria-expanded="false"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>{{ 'collections.sidebar.collections' | t }}</h4>
          <ul class="blog_list toggle_list">
            {% for col in collections %}
              {% unless col.handle == 'frontpage' %}
                <li {% if col.handle == collection.handle %}class="active"{% endif %}><a href="{{ col.url }}" title="{{ col.title | escape }}">{{ col.title }}</a></li>
              {% endunless %}
            {% endfor %}
          </ul>

        {% elsif block.type == 'filter_by_vendor' %}
          <h4 class="toggle" aria-haspopup="true" aria-expanded="false"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>{{ 'collections.sidebar.vendors' | t }}</h4>
          <ul class="blog_list toggle_list">
            {% for product_vendor in shop.vendors %}
              <li {% if product_vendor == collection.title %}class="active"{% endif %}><a href="/collections/vendors?q={{ product_vendor }}&sort_by=created-descending">{{ product_vendor }}</a></li>
            {% endfor %}
          </ul>

        {% elsif block.type == 'text' %}
          <h4 class="toggle" aria-haspopup="true" aria-expanded="false">
            <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   width="10px" height="10px" viewBox="0 0 451.847 451.847" style="enable-background:new 0 0 451.847 451.847;"
   xml:space="preserve">
<g>
  <path d="M225.923,354.706c-8.098,0-16.195-3.092-22.369-9.263L9.27,151.157c-12.359-12.359-12.359-32.397,0-44.751
    c12.354-12.354,32.388-12.354,44.748,0l171.905,171.915l171.906-171.909c12.359-12.354,32.391-12.354,44.744,0
    c12.365,12.354,12.365,32.392,0,44.751L248.292,345.449C242.115,351.621,234.018,354.706,225.923,354.706z"/>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
<g>
</g>
</svg>
{{ block.settings.title | escape }}</h4>
          <ul class="blog_list toggle_list content_block">
            <li>{{ block.settings.text }}</li>
          </ul>
        {% endif %}
      </div>
    {% endfor %}
  </div>
{% endif %}
